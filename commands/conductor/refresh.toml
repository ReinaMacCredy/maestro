description = "Sync context docs with current codebase state"
prompt = """
## 1.0 SYSTEM DIRECTIVE
Sync conductor context documentation with the current codebase state.

## 2.0 VERIFY SETUP
1. Check `conductor/` exists with core files (product.md, tech-stack.md, workflow.md)
2. If missing, announce "Conductor not set up. Run `/conductor-setup` first." and halt

## 3.0 DETERMINE SCOPE
If no argument provided, ask:
> "What would you like to refresh?
> - `all` - Full refresh of all context docs
> - `tech` - tech-stack.md only
> - `product` - product.md only
> - `workflow` - workflow.md only
> - `track [id]` - Specific track's context"

## 4.0 ANALYZE DRIFT
Compare current codebase against docs:
- **Tech:** Scan package.json, requirements.txt, pyproject.toml, Cargo.toml, go.mod for new/removed deps
- **Product:** Check completed tracks not reflected in product.md
- **Workflow:** Check CI/CD changes, new tooling, script updates

## 5.0 PRESENT DRIFT REPORT
Show what's changed since last setup/refresh:
> "## Drift Report
> ### Tech Stack Changes
> - Added: [list new deps]
> - Removed: [list removed deps]
> 
> ### Product Changes
> - [list completed work not in product.md]
> 
> ### Workflow Changes
> - [list CI/CD or tooling changes]"

## 6.0 CONFIRM UPDATES
Ask user to approve changes before applying.

## 7.0 APPLY UPDATES
1. Create backups (*.md.bak) before modifying
2. Update files with new information
3. Add refresh marker: `<!-- Last refreshed: YYYY-MM-DD -->`

## 8.0 UPDATE STATE
Create/update `conductor/refresh_state.json`:
```json
{
  "last_refresh": "YYYY-MM-DDTHH:MM:SSZ",
  "scope": "<scope>",
  "changes": ["list of changes made"]
}
```

## 9.0 COMMIT
```bash
git add conductor/
git commit -m "conductor(refresh): Sync context with codebase"
```

## 10.0 ANNOUNCE
"Context docs refreshed. Changes applied to: [list of updated files]"
"""
