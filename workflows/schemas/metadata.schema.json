{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://conductor.dev/schemas/metadata.schema.json",
  "title": "Track Metadata",
  "description": "Metadata file for a Conductor track",
  "type": "object",
  "required": [
    "track_id",
    "type",
    "status",
    "created_at",
    "updated_at",
    "description",
    "priority"
  ],
  "properties": {
    "track_id": {
      "type": "string",
      "description": "Unique identifier for the track",
      "pattern": "^[a-z0-9_]+_[0-9]{8}$",
      "examples": ["user_auth_20240115", "bug_fix_20240120"]
    },
    "type": {
      "type": "string",
      "description": "Type of track",
      "enum": ["feature", "bug", "chore", "refactor", "hotfix"],
      "default": "feature"
    },
    "status": {
      "type": "string",
      "description": "Current status of the track",
      "enum": ["new", "in_progress", "completed", "cancelled", "blocked"],
      "default": "new"
    },
    "created_at": {
      "type": "string",
      "description": "ISO 8601 timestamp of track creation",
      "format": "date-time",
      "examples": ["2024-01-15T10:30:00Z"]
    },
    "updated_at": {
      "type": "string",
      "description": "ISO 8601 timestamp of last update",
      "format": "date-time",
      "examples": ["2024-01-15T14:45:00Z"]
    },
    "description": {
      "type": "string",
      "description": "Human-readable description of the track",
      "minLength": 1,
      "maxLength": 500
    },
    "priority": {
      "type": "string",
      "description": "Track priority level",
      "enum": ["critical", "high", "medium", "low"],
      "default": "medium"
    },
    "depends_on": {
      "type": "array",
      "items": {"type": "string"},
      "default": [],
      "description": "List of track_ids this track depends on"
    },
    "assigned_to": {
      "type": "string",
      "description": "Person or team assigned to this track"
    },
    "parent_track_id": {
      "type": "string",
      "description": "ID of parent track if this is a sub-track",
      "pattern": "^[a-z0-9_]+_[0-9]{8}$"
    },
    "tags": {
      "type": "array",
      "description": "Optional tags for categorization",
      "items": {
        "type": "string"
      },
      "uniqueItems": true
    },
    "estimated_hours": {
      "type": "number",
      "description": "Estimated hours to complete",
      "minimum": 0
    },
    "actual_hours": {
      "type": "number",
      "description": "Actual hours spent",
      "minimum": 0
    },
    "completed_at": {
      "type": "string",
      "description": "ISO 8601 timestamp when track was completed",
      "format": "date-time"
    },
    "cancelled_at": {
      "type": "string",
      "description": "ISO 8601 timestamp when track was cancelled",
      "format": "date-time"
    },
    "cancellation_reason": {
      "type": "string",
      "description": "Reason for cancellation if cancelled"
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "track_id": "user_auth_20240115",
      "type": "feature",
      "status": "in_progress",
      "created_at": "2024-01-15T10:30:00Z",
      "updated_at": "2024-01-15T14:45:00Z",
      "description": "Implement user authentication with JWT tokens"
    },
    {
      "track_id": "login_bug_20240120",
      "type": "bug",
      "status": "completed",
      "created_at": "2024-01-20T09:00:00Z",
      "updated_at": "2024-01-20T11:30:00Z",
      "description": "Fix login redirect loop on expired session",
      "completed_at": "2024-01-20T11:30:00Z",
      "priority": "high"
    }
  ]
}
