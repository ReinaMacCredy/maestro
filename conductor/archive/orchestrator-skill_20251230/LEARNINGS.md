# Learnings: orchestrator-skill_20251230

<!-- Auto-generated by /conductor-finish -->

## Commands

- `bd close <id1> <id2> ... --reason completed` - Close multiple beads at once
- `bd update <id> --status in_progress` - Claim task in SA mode
- `bd ready --json 2>/dev/null | head -50` - Check available work with truncated output
- `bd sync` - Sync beads to git after work complete

## Gotchas

- **Agent Mail MCP Failure**: If Agent Mail unavailable, graceful fallback to sequential `/conductor-implement`
- **Runtime Testing**: Integration tests (Agent Mail, worker spawn) require live MCP - skip with `--reason skipped`
- **Worker Autonomy**: Orchestrator workers CAN self claim/close beads (differs from standard subagent rules)
- **Mode B Workers**: Workers spawned by `/conductor-orchestrate` have full bd access unlike `/conductor-implement` subagents

## Patterns

- **Parallel Dispatch**: Parse Track Assignments → Map tasks to beads → Initialize Agent Mail → Reserve files → Spawn workers → Monitor → Handle blockers → Verify completion
- **Session Lifecycle**: Register → Check inbox → Reserve files → Work loop with heartbeat → Send summary → Release reservations
- **Graceful Fallback**: Coordination optional, work mandatory - proceed on MCP failure with sequential fallback
- **Worker Prompt Template**: Include assignment details, protocol steps, cross-track notification rules

---

**Source threads:**
- T-019b6b66-e326-7692-a03f-0158bb8c8a3e: Orchestrator skill implementation
