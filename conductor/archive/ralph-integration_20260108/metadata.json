{
  "track_id": "ralph-integration_20260108",
  "type": "feature",
  "status": "archived",
  "priority": "high",
  "created_at": "2026-01-08T12:00:00Z",
  "updated_at": "2026-01-08T23:00:00Z",
  "description": "Integrate Ralph autonomous AI agent loop as third execution mode (ca) in Maestro Conductor",
  "has_design": true,
  "artifacts": {
    "design": true,
    "spec": false,
    "plan": true,
    "beads": false
  },
  "workflow": {
    "state": "DONE",
    "history": [
      {
        "state": "INIT",
        "at": "2026-01-08T12:00:00Z",
        "command": "ds"
      },
      {
        "state": "DESIGNED",
        "at": "2026-01-08T12:30:00Z",
        "command": "ds"
      },
      {
        "state": "DONE",
        "at": "2026-01-08T23:00:00Z",
        "command": "autonomous"
      }
    ],
    "branch": null,
    "archived": true,
    "keep": false
  },
  "beads": {
    "status": "pending",
    "epicId": null,
    "epics": [],
    "issues": [],
    "planTasks": {},
    "beadToTask": {},
    "fileScopes": {},
    "orchestrated": false
  },
  "ralph": {
    "enabled": true,
    "active": false,
    "maxIterations": 10,
    "currentIteration": 0,
    "progressFile": "progress.txt",
    "stories": {
      "1.1": {
        "title": "Extend metadata.schema.json with ralph section",
        "acceptanceCriteria": [
          "ralph object defined in schema with enabled, active, maxIterations, stories",
          "autonomous added to workflow.history.command enum",
          "autonomous added to threads[].action enum",
          "Schema validates successfully with jsonschema"
        ],
        "passes": true,
        "notes": ""
      },
      "1.2": {
        "title": "Create toolboxes/ralph directory structure",
        "acceptanceCriteria": [
          "ralph.sh copied and executable",
          "prompt.md copied",
          "README.md created"
        ],
        "passes": true,
        "notes": ""
      },
      "2.1": {
        "title": "Modify ralph.sh to read metadata.json",
        "acceptanceCriteria": [
          "Accepts track path argument",
          "Reads metadata.ralph.stories for task list",
          "Uses workflow.branch for branch naming",
          "Writes progress to track's progress.txt",
          "Updates passes status on story completion",
          "Sets ralph.active = true at start, false at end"
        ],
        "passes": true,
        "notes": ""
      },
      "2.2": {
        "title": "Adapt prompt.md for Maestro conventions",
        "acceptanceCriteria": [
          "References Maestro track structure",
          "Uses metadata.json path",
          "Includes bead ID in commits"
        ],
        "passes": true,
        "notes": ""
      },
      "3.1": {
        "title": "Add ca trigger to maestro-core routing table",
        "acceptanceCriteria": [
          "ca maps to conductor",
          "/conductor-autonomous maps to conductor",
          "Phrase triggers added"
        ],
        "passes": true,
        "notes": ""
      },
      "3.2": {
        "title": "Add /conductor-autonomous command to conductor skill",
        "acceptanceCriteria": [
          "Entry point in SKILL.md for ca and /conductor-autonomous",
          "Preflight checks ralph.enabled is true",
          "Preflight blocks if ralph.active is true (another ca running)",
          "Blocks ci/co commands when ralph.active is true",
          "Invokes toolboxes/ralph/ralph.sh with track path",
          "Updates workflow.state to DONE on completion"
        ],
        "passes": true,
        "notes": ""
      },
      "4.1": {
        "title": "Update ds to populate metadata.ralph.stories",
        "acceptanceCriteria": [
          "Extracts tasks from plan.md",
          "Populates stories with title and criteria",
          "Sets enabled = true"
        ],
        "passes": true,
        "notes": ""
      },
      "4.2": {
        "title": "Add ca option to Phase 8 READY menu",
        "acceptanceCriteria": [
          "[A] Autonomous option in menu alongside [O] and [S]",
          "Triggers ca command when selected",
          "Auto-select based on metadata.ralph.enabled preference",
          "Default timeout behavior documented"
        ],
        "passes": true,
        "notes": ""
      },
      "5.1": {
        "title": "Update AGENTS.md with Ralph commands",
        "acceptanceCriteria": [
          "ca in Commands Quick Reference table",
          "Ralph workflow documented in Session Protocol",
          "Gotchas: ralph.active lock, progress.txt location"
        ],
        "passes": true,
        "notes": ""
      },
      "5.2": {
        "title": "Update conductor/AGENTS.md with learnings",
        "acceptanceCriteria": [
          "Ralph commands documented",
          "Gotchas added"
        ],
        "passes": true,
        "notes": ""
      }
    }
  }
}
