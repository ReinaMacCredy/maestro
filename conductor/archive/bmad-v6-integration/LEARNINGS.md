# Learnings: bmad-v6-integration

<!-- Auto-generated by /conductor-finish -->

## Commands

- `mkdir -p skills/design/references/bmad/agents/{core,bmm,cis}` - Create nested directory structure for agents
- `cp -r skills/design/references/party-mode/* skills/design/references/party-mode-backup/` - Archive old system before replacement
- `curl -s https://raw.githubusercontent.com/.../brain-methods.csv` - Sync CSV data from upstream repo
- `wc -l <file>.csv` - Verify CSV row counts match upstream

## Gotchas

- **Agent names/icons differ from upstream** - SM is Bob (not Sarah), Presentation Master is Caravaggio ðŸŽ¨ (not Leo ðŸŽ¤) - always verify against official BMAD repo
- **Sidecar structure matters** - Upstream has `storyteller-sidecar/` with only 2 files (`stories-told.md`, `story-preferences.md`); extra knowledge files are Maestro enhancements
- **Language switch mid-implementation** - Original design specified Vietnamese, switched to English for broader compatibility - update ALL agent files, config.yaml, SKILL.md, README.md
- **Manifest format differs** - BMAD v6 uses `.agent.yaml` files; Maestro uses native MD with YAML frontmatter
- **Module field required** - Every agent needs `module: bmm|cis|core` in frontmatter for manifest.yaml selection logic

## Patterns

- **Hybrid Strategy "Conductor Absorbs BMAD"** - Conductor owns flow (ds â†’ spec â†’ plan â†’ implement), BMAD enhances each stage with 16 expert agents
- **Adapter Layer for Sync** - Use adapter.md to map BMAD v6 paths to Maestro structure; update adapter when v6 changes paths
- **Fork & Rewrite for Agents** - Convert `.agent.yaml` to native MD format, keeping persona/principles/expertise sections
- **Copy Direct for Knowledge** - CSV files and sidecar content can be copied directly from upstream
- **Topic Mapping for Selection** - manifest.yaml includes `selection.topic_mapping` to help BMad Master select relevant agents

---

**Source threads:**

- T-019b5baf-7167-763a-8b3a-0d35da26f113: Design session (Double Diamond)
- T-019b5be9-dc4f-72cd-acea-104d398339b2: Track creation (newtrack)
- T-019b5bf2-dd51-74d8-bcfa-f50f3ccd0d36: Implementation session
